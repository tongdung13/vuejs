{"remainingRequest":"/var/www/html/thien_an/thien-an-salon-website/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/var/www/html/thien_an/thien-an-salon-website/src/views/elements/banHangVaMarketing/quanLyThe/dsNguoiDungThe.vue?vue&type=style&index=0&id=f9b86d1a&scoped=true&lang=css","dependencies":[{"path":"/var/www/html/thien_an/thien-an-salon-website/src/views/elements/banHangVaMarketing/quanLyThe/dsNguoiDungThe.vue","mtime":1627520926723},{"path":"/var/www/html/thien_an/thien-an-salon-website/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/thien_an/thien-an-salon-website/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1624994109000},{"path":"/var/www/html/thien_an/thien-an-salon-website/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/var/www/html/thien_an/thien-an-salon-website/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/thien_an/thien-an-salon-website/node_modules/vue-loader-v16/dist/index.js","mtime":1624994108000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5ib3JkZXJ4IHsKICBib3JkZXI6IDFweCBzb2xpZCAjZDQ0NzZmOwogIHBhZGRpbmc6IDVweCAyNXB4OwogIGJvcmRlci1yYWRpdXM6IDRweDsKICBjdXJzb3I6IHBvaW50ZXI7Cn0K"},{"version":3,"sources":["/var/www/html/thien_an/thien-an-salon-website/src/views/elements/banHangVaMarketing/quanLyThe/dsNguoiDungThe.vue"],"names":[],"mappings":";AAmKA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACzB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACjB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACjB","file":"/var/www/html/thien_an/thien-an-salon-website/src/views/elements/banHangVaMarketing/quanLyThe/dsNguoiDungThe.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"col-md-10 res mb-5 mt-3 res-0\">\n    <div @click=\"changeClick\" class=\"bg1 p-3\">\n      <div class=\"row\">\n        <div class=\"col-md-6 col-sm-6 col-6\">\n          <h6>\n            <span class=\"color-main\"> DANH SÁCH KHÁCH HÀNG - </span>\n            <span style=\"color: #3a49f9\"> THẺ TIỀN </span>\n          </h6>\n        </div>\n        <div class=\"col-md-6 col-sm-6 col-6\">\n          <span\n            @click=\"backPage\"\n            class=\"borderx hover mr-3 color-main float-right\"\n            >Quay lại</span\n          >\n        </div>\n      </div>\n      <div class=\"mt-3\">\n        <input\n          type=\"text\"\n          placeholder=\"Tìm kiếm khách hàng\"\n          style=\"width: 25%; padding: 4px 10px\"\n          v-model=\"search\"\n        />\n      </div>\n      <div v-if=\"msg == ''\" class=\"mt-3\">\n        <table class=\"table table-borderless\">\n          <thead>\n            <tr>\n              <th scope=\"col\">Mã thẻ</th>\n              <th scope=\"col\">Tên người dùng</th>\n              <th scope=\"col\">Số điện thoại</th>\n              <th scope=\"col\">Giới tính</th>\n              <th scope=\"col\">Ngày tạo</th>\n              <th scope=\"col\">Số tiền</th>\n              <th></th>\n              <th>Thao tác</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(customer, index) in filterCustomer\" :key=\"index\">\n              <td class=\"font-weight-bold\">{{ customer.user_id }}</td>\n              <td>{{ customer.name }}</td>\n              <td>{{ customer.phone }}</td>\n              <td>{{ formatSex(customer.sex) }}</td>\n              <td class=\"hidden\">{{ formatDate(customer.created_at) }}</td>\n              <td class=\"color-main font-weight-bold\">\n                {{ formatPrice(6000000) }}\n              </td>\n              <td>\n                <input type=\"checkbox\" />\n              </td>\n              <td class=\"text-right text-danger\" style=\"cursor: pointer\">\n                <span @click=\"deleteCustomer(customer.id)\">Xoá</span>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div v-else class=\"mt-3 text-center\">\n        <b>{{ msg }}</b>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { HTTP } from \"@/main\";\nimport { formatDate } from \"@/main\";\nimport { formatPrice } from \"@/main\";\nexport default {\n  props: [\"nguoiDungId\"],\n  name: \"danhSachNguoiDungThe\",\n  data() {\n    return {\n      listCustomerCard: [],\n      msg: \"\",\n      search: \"\",\n    };\n  },\n  beforeMount() {\n    this.listCustomerCards();\n  },\n  methods: {\n    // Danh sách người dùng thẻ\n    listCustomerCards() {\n      let Code = window.location.href.slice(\n        window.location.href.indexOf(\"/danh-sach-nguoi-dung-the/\") + 26,\n        window.location.href.length\n      );\n      HTTP.get(`/salon/main/manage/card/${Code}/customer?page=1`)\n        .then((response) => {\n          this.listCustomerCard = response.data.data.data;\n          if (this.listCustomerCard.length == 0) {\n            this.msg = \"chưa có người dùng\";\n          } else return this.listCustomerCard;\n        })\n        .catch((e) => {\n          this.errors.push(e);\n        });\n    },\n    // // ==================\n\n    // Xoá người dùng thẻ\n    deleteCustomer(index) {\n      this.$swal({\n        title: \"Xoá người dùng?\",\n        type: \"warning\",\n        showCancelButton: true,\n        confirmButtonColor: \"#3085d6\",\n        cancelButtonColor: \"#d33\",\n        confirmButtonText: \"Delete!\",\n      }).then((result) => {\n        if (result.value) {\n          let cardId = window.location.href.slice(\n            window.location.href.indexOf(\"/danh-sach-nguoi-dung-the/\") + 26,\n            window.location.href.length\n          );\n          let customerId = index;\n          HTTP.delete(\n            `/salon/main/manage/card/${cardId}/customer/${customerId}/delete`\n          ).then((res) => {\n            let result = res.data;\n            if (result.status === 1) {\n              this.$swal(\"Đã xoá!\", result.message, \"success\");\n              this.listCustomerCards();\n            } else {\n              this.$swal(\"\", result.message, \"error\");\n            }\n          });\n        }\n      });\n    },\n    // ======================\n\n    // Định dạng giới tính\n    formatSex(index) {\n      if (index === 1) {\n        return (index = \"nam\");\n      } else return (index = \"nữ\");\n    },\n    // ====================\n    backPage() {\n      history.back();\n    },\n    formatPrice,\n    formatDate,\n  },\n  computed: {\n    // TÌm kiếm\n    filterCustomer() {\n      // console.log(this.listCustomerCard);\n      return this.listCustomerCard.filter((item) => {\n        return item.name.toLowerCase().indexOf(this.search.toLowerCase()) > -1;\n      });\n    },\n    // =============\n  },\n};\n</script>\n\n<style scoped>\n.borderx {\n  border: 1px solid #d4476f;\n  padding: 5px 25px;\n  border-radius: 4px;\n  cursor: pointer;\n}\n</style>\n"]}]}