{"remainingRequest":"/var/www/html/thien_an/thien-an-salon-website/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/var/www/html/thien_an/thien-an-salon-website/src/views/elements/quanLyNhanSu/quanLyKPI/themKPI.vue?vue&type=style&index=0&id=adfd6a76&scoped=true&lang=css","dependencies":[{"path":"/var/www/html/thien_an/thien-an-salon-website/src/views/elements/quanLyNhanSu/quanLyKPI/themKPI.vue","mtime":1627520926727},{"path":"/var/www/html/thien_an/thien-an-salon-website/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/thien_an/thien-an-salon-website/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1624994109000},{"path":"/var/www/html/thien_an/thien-an-salon-website/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/var/www/html/thien_an/thien-an-salon-website/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/thien_an/thien-an-salon-website/node_modules/vue-loader-v16/dist/index.js","mtime":1624994108000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiogewogIGZvbnQtc2l6ZTogMTRweDsKfQoudGFibGUtaW5wdXQgewogIHBhZGRpbmc6IDVweCAxMHB4Owp9Ci5ib3JkZXJ4IHsKICBib3JkZXI6IDFweCBzb2xpZCAjZDQ0NzZmOwogIHBhZGRpbmc6IDVweCAyNXB4OwogIGJvcmRlci1yYWRpdXM6IDRweDsKICBjdXJzb3I6IHBvaW50ZXI7Cn0KCi5ib3JkZXJ4OmhvdmVyIHsKICBjb2xvcjogd2hpdGU7CiAgYmFja2dyb3VuZC1jb2xvcjogI2Q0NDc2ZjsKfQoKbGFiZWwgewogIHBhZGRpbmc6IDI1cHggMTVweDsKICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNTYpOwogIC8qIHNoYXBlICovCgogIGJveC1zaGFkb3c6IDBweCA0cHggNHB4IHJnYmEoMCwgMCwgMCwgMC4wNSk7CiAgYm9yZGVyLXJhZGl1czogOHB4Owp9Cgp1bCB7CiAgcGFkZGluZzogNXB4IDE1cHg7Cn0KCmxpIHsKICBwYWRkaW5nOiA1cHggMTVweDsKICBsaXN0LXN0eWxlOiBub25lOwp9CgouY2FyZC1oZWFkZXIgewogIHBhZGRpbmc6IDVweDsKICBib3JkZXItYm90dG9tOiBub25lOwogIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC41Nik7Cn0KCi5jYXJkLWJvZHkgewogIHBhZGRpbmc6IDA7Cn0KCi5jYXJkIHsKICBib3JkZXI6IG5vbmU7Cn0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA3NjhweCkgewogIC5ib3JkZXJ4IHsKICAgIHBhZGRpbmc6IDVweCAxNXB4OwogIH0KfQo="},{"version":3,"sources":["/var/www/html/thien_an/thien-an-salon-website/src/views/elements/quanLyNhanSu/quanLyKPI/themKPI.vue"],"names":[],"mappings":"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","file":"/var/www/html/thien_an/thien-an-salon-website/src/views/elements/quanLyNhanSu/quanLyKPI/themKPI.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"col-md-10 res mb-5 mt-3\">\n    <h5 class=\"mt-3 font-weight-bold color-main\">THÊM KPI</h5>\n    <div class=\"mt-4 bg-8 pt-3 pb-3 pl-5 pr-5\">\n      <h6>THÔNG TIN KPI</h6>\n      <div class=\"mt-3 pb-2\">\n        <table class=\"table table-borderless\">\n          <tbody class=\"text-right\">\n            <tr>\n              <td style=\"width: 15%\">\n                <div class=\"table-input\">Chọn salon:</div>\n              </td>\n              <td>\n                <select\n                  name=\"salon_id\"\n                  class=\"inputx mr-3 res-margin-0\"\n                  id=\"cars\"\n                  style=\"width: 100%; outline: none\"\n                  v-model=\"addKPI.salon_id\"\n                >\n                  <option value=\"\">--Tất cả salon--</option>\n\n                  <option\n                    v-for=\"salon in listStore\"\n                    :key=\"salon.id\"\n                    :value=\"salon.id\"\n                  >\n                    {{ salon.salon_name }}\n                  </option>\n                </select>\n              </td>\n\n              <td style=\"width: 15%\">\n                <div class=\"table-input\">Chọn bộ phận:</div>\n              </td>\n              <td>\n                <select\n                  name=\"salon_id\"\n                  class=\"inputx mr-3 res-margin-0\"\n                  id=\"cars\"\n                  style=\"width: 100%; outline: none\"\n                  v-model=\"addKPI.position\"\n                >\n                  <option value=\"\">--Chọn bộ phận--</option>\n                  <option value=\"3\">Bộ phận bán hàng</option>\n                  <option value=\"4\">Bộ phận marketing</option>\n                  <option value=\"5\">Bộ phận thợ chính</option>\n                  <option value=\"6\">Bộ phận thợ phụ</option>\n                </select>\n              </td>\n            </tr>\n            <tr>\n              <td style=\"width: 15%\">\n                <div class=\"table-input\">Kiểu:</div>\n              </td>\n              <td>\n                <select\n                  name=\"salon_id\"\n                  class=\"inputx mr-3 res-margin-0\"\n                  id=\"cars\"\n                  style=\"width: 100%; outline: none\"\n                  v-model=\"addKPI.time_type\"\n                  @change=\"analisDay\"\n                >\n                  <option value=\"\">--Chọn kiểu--</option>\n                  <option value=\"1\">Tuần</option>\n                  <option value=\"2\">Tháng</option>\n                  <option value=\"3\">Quý</option>\n                  <option value=\"4\">Năm</option>\n                </select>\n              </td>\n              <td style=\"width: 15%\">\n                <div class=\"table-input\">Số lượt phục vụ:</div>\n              </td>\n              <td>\n                <input\n                  type=\"number\"\n                  style=\"width: 100%\"\n                  placeholder=\"Phục vụ\"\n                  v-model=\"addKPI.serving_quantity\"\n                />\n              </td>\n            </tr>\n            <tr>\n              <td style=\"width: 15%\">\n                <div class=\"table-input\">Doanh thu:</div>\n              </td>\n              <td>\n                <input\n                  type=\"number\"\n                  style=\"width: 100%\"\n                  placeholder=\"Doanh thu\"\n                  v-model=\"addKPI.sales\"\n                />\n              </td>\n              <td style=\"width: 15%\">\n                <div class=\"table-input\">Số lượng KH:</div>\n              </td>\n              <td>\n                <input\n                  type=\"number\"\n                  style=\"width: 100%\"\n                  placeholder=\"Data khách\"\n                  v-model=\"addKPI.customers_numbers\"\n                />\n              </td>\n            </tr>\n            <tr>\n              <td style=\"width: 15%\">\n                <div class=\"table-input\">Đơn hàng:</div>\n              </td>\n              <td>\n                <input\n                  type=\"number\"\n                  style=\"width: 100%\"\n                  placeholder=\"Đơn hàng\"\n                  v-model=\"addKPI.orders\"\n                />\n              </td>\n              <td style=\"width: 15%\">\n                <div class=\"table-input\">Khách hàng mới:</div>\n              </td>\n              <td>\n                <input\n                  type=\"number\"\n                  style=\"width: 100%\"\n                  placeholder=\"Khách hàng mới\"\n                  v-model=\"addKPI.new_customers_numbers\"\n                />\n              </td>\n            </tr>\n            <tr>\n              <td style=\"width: 15%\">\n                <div class=\"table-input\">Ngày bắt đầu:</div>\n              </td>\n              <td>\n                <input\n                  type=\"date\"\n                  style=\"width: 100%\"\n                  v-model=\"addKPI.start_date\"\n                  @change=\"analisDay\"\n                />\n              </td>\n              <td style=\"width: 15%\">\n                <div class=\"table-input\">Ngày kết thúc</div>\n              </td>\n              <td>\n                <input\n                  type=\"text\"\n                  style=\"width: 100%\"\n                  v-model=\"addKPI.end_date\"\n                  readonly\n                />\n              </td>\n            </tr>\n            <tr>\n              <td style=\"width: 15%\">\n                <div class=\"table-input\">Thời gian:</div>\n              </td>\n              <td style=\"width: 30%\">\n                <div class=\"inputx text-left\" v-if=\"addKPI.days > 0\">\n                  {{ addKPI.days + \" ngày\" }}\n                </div>\n                <div class=\"inputx text-left\" v-else style=\"min-height: 34px;\">\n                  {{ addKPI.days }}\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class=\"mt-3 text-center pb-3\">\n        <span @click=\"backPage\" class=\"borderx mr-2 color-main\">Quay lại</span>\n        <span @click=\"addKPIs\" class=\"borderx color-main\">Lưu và hiển thị</span>\n      </div>\n    </div>\n    <!-- ========================== -->\n\n    <!-- ================== -->\n  </div>\n</template>\n<script>\nimport { HTTP } from \"@/main\";\nimport { formatDate } from \"@/main\";\nexport default {\n  name: \"themKPI\",\n  data() {\n    return {\n      listStore: {},\n      addKPI: {\n        salon_id: \"\",\n        time_type: \"\",\n        start_date: \"\",\n        end_date: \"\",\n        days: \"\",\n        sales: 0,\n        serving_quantity: 0,\n        customers_numbers: 0,\n        new_customers_numbers: 0,\n        orders: 0,\n        position: \"\",\n      },\n    };\n  },\n  created() {\n    HTTP.get(\"/salon/main/manage/branch/all\").then((res) => {\n      let result = res.data;\n      if (result.status === 1) {\n        let data = result.data;\n\n        if (data.length > 0) {\n          this.listStore = data;\n          console.log(this.listStore);\n        }\n      } else {\n        this.notification.status = true;\n        this.notification.message = result.message;\n      }\n      this.loading = false;\n    });\n  },\n  methods: {\n    analisDay() {\n      if (this.addKPI.time_type == \"\") {\n        this.addKPI.days = \"\";\n        this.addKPI.start_date = \"\";\n        this.addKPI.end_date = \"\";\n      } else {\n        if (this.addKPI.time_type == 1 && this.addKPI.start_date) {\n          const date = new Date(this.addKPI.start_date);\n          date.setDate(date.getDate() + 7);\n          this.addKPI.days = 7;\n          this.addKPI.end_date = this.formatDate(date);\n        } else if (this.addKPI.time_type == 2 && this.addKPI.start_date) {\n          const date = new Date(this.addKPI.start_date);\n          let dateD = date.getDate();\n          let yearD;\n          if (dateD < 10) {\n            dateD = \"0\" + dateD;\n          }\n          let monthD = date.getMonth() + 1 + 1;\n          if (monthD > 12) {\n            monthD = monthD - 12;\n            yearD = date.getFullYear() + 1;\n          } else yearD = date.getFullYear();\n          if (monthD < 10) {\n            monthD = \"0\" + monthD;\n          }\n          this.addKPI.end_date = monthD + \"/\" + dateD + \"/\" + yearD;\n        } else if (this.addKPI.time_type == 3 && this.addKPI.start_date) {\n          const date = new Date(this.addKPI.start_date);\n          let dateD = date.getDate();\n          let yearD;\n          if (dateD < 10) {\n            dateD = \"0\" + dateD;\n          }\n          let monthD = date.getMonth() + 1 + 3;\n          if (monthD > 12) {\n            monthD = monthD - 12;\n            yearD = date.getFullYear() + 1;\n          } else yearD = date.getFullYear();\n          if (monthD < 10) {\n            monthD = \"0\" + monthD;\n          }\n          let ccc = monthD + \"/\" + dateD + \"/\" + yearD;\n          let xxx = new Date(ccc);\n          this.addKPI.end_date = formatDate(xxx);\n        } else if (this.addKPI.time_type == 4 && this.addKPI.start_date) {\n          const date = new Date(this.addKPI.start_date);\n          let dateD = date.getDate();\n          if (dateD < 10) {\n            dateD = \"0\" + dateD;\n          }\n          let monthD = date.getMonth() + 1;\n          if (monthD < 10) {\n            monthD = \"0\" + monthD;\n          }\n          let yearD = date.getFullYear() + 1;\n          let xxx = monthD + \"/\" + dateD + \"/\" + yearD;\n          this.addKPI.end_date = formatDate(xxx);\n        }\n        if (this.addKPI.start_date) {\n          const timeDiff =\n            new Date(this.addKPI.end_date) - new Date(this.addKPI.start_date);\n          const days = timeDiff / (1000 * 60 * 60 * 24);\n          this.addKPI.days = Math.round(days);\n        }\n      }\n    },\n\n    // ====================\n\n    // Thêm KPI\n    addKPIs() {\n      // this.addKPI.start_date = this.formatDates(this.addKPI.start_date);\n      this.addKPI.end_date = this.formatDates(this.addKPI.end_date);\n      HTTP.post(`/salon/main/manage/kpi/store`, this.addKPI).then((res) => {\n        let result = res.data;\n        if (result.status === 1) {\n          this.$swal(\"\", result.message, \"success\");\n          history.back();\n        } else {\n          this.$swal(\"\", result.message, \"error\");\n        }\n      });\n    },\n    // ================\n    formatDates(date) {\n      var q = new Date(date);\n      var dd = q.getDate();\n      if (dd < 10) {\n        dd = \"0\" + dd;\n      }\n      var mm = q.getMonth() + 1;\n      if (mm < 10) {\n        mm = \"0\" + mm;\n      }\n      var yyyy = q.getFullYear();\n      return (date = yyyy + \"-\" + mm + \"-\" + dd);\n    },\n    // =====================\n    formatDate,\n    backPage() {\n      history.back();\n    },\n  },\n};\n</script>\n<style scoped>\n* {\n  font-size: 14px;\n}\n.table-input {\n  padding: 5px 10px;\n}\n.borderx {\n  border: 1px solid #d4476f;\n  padding: 5px 25px;\n  border-radius: 4px;\n  cursor: pointer;\n}\n\n.borderx:hover {\n  color: white;\n  background-color: #d4476f;\n}\n\nlabel {\n  padding: 25px 15px;\n  background: rgba(255, 255, 255, 0.56);\n  /* shape */\n\n  box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.05);\n  border-radius: 8px;\n}\n\nul {\n  padding: 5px 15px;\n}\n\nli {\n  padding: 5px 15px;\n  list-style: none;\n}\n\n.card-header {\n  padding: 5px;\n  border-bottom: none;\n  background: rgba(255, 255, 255, 0.56);\n}\n\n.card-body {\n  padding: 0;\n}\n\n.card {\n  border: none;\n}\n@media only screen and (max-width: 768px) {\n  .borderx {\n    padding: 5px 15px;\n  }\n}\n</style>\n"]}]}